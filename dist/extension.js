(()=>{"use strict";var t={398:t=>{t.exports=require("vscode")},940:function(t,e,n){var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(r=function(t){return r=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},r(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=r(t),s=0;s<n.length;s++)"default"!==n[s]&&i(e,t,n[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.TiptapEditorProvider=void 0;const a=s(n(398));class c{static register(t){const e=new c(t);return a.window.registerCustomEditorProvider(c.viewType,e)}constructor(t){this.context=t}async resolveCustomTextEditor(t,e,n){e.webview.options={enableScripts:!0,localResourceRoots:[a.Uri.joinPath(this.context.extensionUri,"dist")]},e.webview.html=this.getHtmlForWebview(e.webview);const r=a.workspace.onDidChangeTextDocument(n=>{n.document.uri.toString()===t.uri.toString()&&e.webview.postMessage({type:"update",text:t.getText()})});e.webview.onDidReceiveMessage(n=>{switch(n.type){case"ready":return void e.webview.postMessage({type:"update",text:t.getText()});case"update":return void this.updateTextDocument(t,n.text)}}),e.onDidDispose(()=>{r.dispose()})}getHtmlForWebview(t){const e=t.asWebviewUri(a.Uri.joinPath(this.context.extensionUri,"dist","webview.js"));return`\n\t\t\t<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${t.cspSource} 'unsafe-inline'; script-src ${t.cspSource} 'unsafe-inline';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<title>Tiptap Editor</title>\n\t\t\t\t<style>\n\t\t\t\t\tbody {\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-background);\n\t\t\t\t\t\tcolor: var(--vscode-editor-foreground);\n\t\t\t\t\t\tfont-family: var(--vscode-font-family);\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t\t#root {\n\t\t\t\t\t\theight: 100vh;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<div id="root">Loading Tiptap Editor...</div>\n\t\t\t\t<script>\n\t\t\t\t\twindow.addEventListener('error', function (e) {\n\t\t\t\t\t\tconst root = document.getElementById('root');\n\t\t\t\t\t\tif (root) {\n\t\t\t\t\t\t\troot.innerHTML = '<div style="color: red; padding: 20px;">' + \n\t\t\t\t\t\t\t\t'<h3>Runtime Error</h3>' +\n\t\t\t\t\t\t\t\t'<pre>' + e.message + '\\n' + e.filename + ':' + e.lineno + '</pre>' +\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t<\/script>\n\t\t\t\t<script src="${e}"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}updateTextDocument(t,e){const n=new a.WorkspaceEdit;return n.replace(t.uri,new a.Range(0,0,t.lineCount,0),e),a.workspace.applyEdit(n)}}e.TiptapEditorProvider=c,c.viewType="tiptap-wysiwyg.markdownEditor"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}var r={};(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(t){t.subscriptions.push(e.TiptapEditorProvider.register(t))};const e=n(940)})();var i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();