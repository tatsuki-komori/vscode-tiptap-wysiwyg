# 1. Markdown記法のサポート強化 (最優先)
現在は StarterKit のみを使用しているため、基本的な記法しか使えません。以下のような拡張機能を追加すると、よりObsidianに近づきます。

## 1. 表 (Tables)
Markdownの表をGUIで操作するには、公式のTable拡張機能と、Markdown変換用のライブラリを組み合わせるのが一般的です。

推奨ライブラリ:

@tiptap/extension-table: 表全体のコンテナ。

@tiptap/extension-table-row: 行。

@tiptap/extension-table-cell: セル。

@tiptap/extension-table-header: ヘッダー。

実装のポイント:

Markdown変換: Tiptapの内部JSONをMarkdownの表構文に変換するために、tiptap-markdown などのライブラリと併用する必要があります。

操作UI: 行や列を追加・削除するためのボタンやメニュー（GUI）は、Tiptap自体には含まれていないため、自分でボタンを配置し、API（例: editor.chain().focus().addColumnAfter().run()）を叩く実装が必要です。

## 2. タスクリスト (Task Lists)
GitHubのような [ ] [x] のチェックボックスリストを実現します。

推奨ライブラリ:

@tiptap/extension-task-list: <ul> に相当するラッパー。

@tiptap/extension-task-item: <li> に相当する各アイテム。

実装のポイント:

ネスト（入れ子）構造に対応させる場合、CSSでのインデント調整や、Tabキーでのネスト操作（SinkListItem）を設定する必要があります。

tiptap-markdown を使用していれば、自動的に - [ ] の形式で入出力されます。

## 3. 画像 (Images)
画像の表示自体は公式拡張で可能ですが、**「ローカルパスへの保存」**はTiptapのスコープ外（アプリケーション側の責務）であるため、イベントハンドラの実装が重要になります。

推奨ライブラリ:

@tiptap/extension-image: 画像ノードを表示するための基本拡張。

実装のポイント（ローカル保存フロー）:

イベントフック: editorProps の handlePaste や handleDrop を使用して、画像ファイルがドロップされたイベントを捕捉します。

保存処理: イベント内でファイルオブジェクト (File) を受け取り、アプリ側（ElectronやVS Code APIなど）でローカルディスクに保存します。

パスの挿入: 保存先のパス（例: ./images/example.png）を取得し、setImage コマンドを使ってエディタ内に挿入します。

## 4. 数式 (Math)
Tiptapには公式の数式プラグイン（無料版）が存在しないため、コミュニティ製の拡張機能を使用するか、KaTeXをラップしたカスタムノードを作成します。

推奨ライブラリ:

@aarkue/tiptap-math-extension: KaTeXを使用した数式表示のためのコミュニティ製拡張機能。インライン数式（$E=mc^2$）とブロック数式（$$...$$）の両方に対応している場合が多いです。

本体として katex のインストールも必要です。

実装のポイント:

CSS: katex/dist/katex.min.css を読み込むのを忘れないようにしてください。これがないと数式が正しくレンダリングされません。

編集体験: 数式をクリックしたときに、プレビューではなく「LaTeXソースコード」が表示され、編集完了後にまたレンダリングされるような「Node View」の実装が必要になる場合があります。

# 2. 編集体験の向上 (UI/UX)
- フローティングメニュー / バブルメニュー: テキストを選択したときに、太字やリンク化などのボタンがポップアップするメニュー（Tiptapの BubbleMenu）を実装する。
- テーマの完全対応: 現在も背景色などは対応していますが、引用 (>) やコードブロックのスタイルを、VS Codeの現在のテーマに合わせてより美しく装飾する。

# 3. 技術的な改善
- スクロール同期: ソースモードとWYSIWYGモードを切り替えたときに、スクロール位置を同期させる。
- 差分更新 (Incremental Update): 現在はファイル全体を書き換えていますが、大きなファイルだと重くなる可能性があります。変更箇所だけを更新するロジックにするとパフォーマンスが向上します。

# 4. VS Codeとの連携強化
- 設定画面: 「デフォルトでSourceモードで開くか」「フォントサイズ」などをVS Codeの設定 (settings.json) から変更できるようにする。
- アウトライン表示: VS Codeの左側にある「アウトライン」パネルに、Tiptap内の見出し構造を反映させる。