{"version":3,"file":"extension.js","mappings":"kCAAAA,EAAOC,QAAUC,QAAQ,S,i4BCAzB,kBAEA,MAAaC,EAEL,eAAOC,CAASC,GACtB,MAAMC,EAAW,IAAIH,EAAqBE,GAE1C,OAD6BE,EAAOC,OAAOC,6BAA6BN,EAAqBO,SAAUJ,EAExG,CAIA,WAAAK,CACkBN,GAAA,KAAAA,QAAAA,CACd,CAEG,6BAAMO,CACZC,EACAC,EACAC,GAEAD,EAAaE,QAAQC,QAAU,CAC9BC,eAAe,EACfC,mBAAoB,CACnBZ,EAAOa,IAAIC,SAASC,KAAKjB,QAAQkB,aAAc,UAIjDT,EAAaE,QAAQQ,KAAOF,KAAKG,kBAAkBX,EAAaE,SAGhE,MAAMU,EAA6BnB,EAAOoB,UAAUC,wBAAyBC,IACxEA,EAAEhB,SAASiB,IAAIC,aAAelB,EAASiB,IAAIC,YAC9CjB,EAAaE,QAAQgB,YAAY,CAChCC,KAAM,SACNC,KAAMrB,EAASsB,cAMlBrB,EAAaE,QAAQoB,oBAAqBP,IACzC,OAAQA,EAAEI,MACT,IAAK,QAKJ,YAJAnB,EAAaE,QAAQgB,YAAY,CAChCC,KAAM,SACNC,KAAMrB,EAASsB,YAGjB,IAAK,SAEJ,YADAb,KAAKe,mBAAmBxB,EAAUgB,EAAEK,SAWvCpB,EAAawB,aAAa,KACzBZ,EAA2Ba,WAE7B,CAEQ,iBAAAd,CAAkBT,GACzB,MAAMwB,EAAYxB,EAAQyB,aAAalC,EAAOa,IAAIC,SAASC,KAAKjB,QAAQkB,aAAc,OAAQ,eAE9F,MAAO,4LAK+EP,EAAQ0B,yCAAyC1B,EAAQ0B,0lCA+B9HF,6CAGlB,CAEQ,kBAAAH,CAAmBxB,EAA+BqB,GACzD,MAAMS,EAAO,IAAIpC,EAAOqC,cAUxB,OANAD,EAAKE,QACJhC,EAASiB,IACT,IAAIvB,EAAOuC,MAAM,EAAG,EAAGjC,EAASkC,UAAW,GAC3Cb,GAGM3B,EAAOoB,UAAUqB,UAAUL,EACnC,EAxHD,yBAQyB,EAAAjC,SAAW,+B,GCThCuC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAanD,QAGrB,IAAID,EAASiD,EAAyBE,GAAY,CAGjDlD,QAAS,CAAC,GAOX,OAHAqD,EAAoBH,GAAUI,KAAKvD,EAAOC,QAASD,EAAQA,EAAOC,QAASiD,GAGpElD,EAAOC,OACf,C,wECnBA,oBAAyBI,GACxBA,EAAQmD,cAAcC,KAAK,EAAAtD,qBAAqBC,SAASC,GAC1D,EAJA,c","sources":["../external commonjs \"vscode\"",".././src/TiptapEditorProvider.ts","../webpack/bootstrap",".././src/extension.ts"],"sourcesContent":["module.exports = require(\"vscode\");","import * as vscode from 'vscode';\n\nexport class TiptapEditorProvider implements vscode.CustomTextEditorProvider {\n\n\tpublic static register(context: vscode.ExtensionContext): vscode.Disposable {\n\t\tconst provider = new TiptapEditorProvider(context);\n\t\tconst providerRegistration = vscode.window.registerCustomEditorProvider(TiptapEditorProvider.viewType, provider);\n\t\treturn providerRegistration;\n\t}\n\n\tprivate static readonly viewType = 'tiptap-wysiwyg.markdownEditor';\n\n\tconstructor(\n\t\tprivate readonly context: vscode.ExtensionContext\n\t) { }\n\n\tpublic async resolveCustomTextEditor(\n\t\tdocument: vscode.TextDocument,\n\t\twebviewPanel: vscode.WebviewPanel,\n\t\t_token: vscode.CancellationToken\n\t): Promise<void> {\n\t\twebviewPanel.webview.options = {\n\t\t\tenableScripts: true,\n\t\t\tlocalResourceRoots: [\n\t\t\t\tvscode.Uri.joinPath(this.context.extensionUri, 'dist')\n\t\t\t]\n\t\t};\n\n\t\twebviewPanel.webview.html = this.getHtmlForWebview(webviewPanel.webview);\n\n\t\t// Update webview when the document changes\n\t\tconst changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument((e: vscode.TextDocumentChangeEvent) => {\n\t\t\tif (e.document.uri.toString() === document.uri.toString()) {\n\t\t\t\twebviewPanel.webview.postMessage({\n\t\t\t\t\ttype: 'update',\n\t\t\t\t\ttext: document.getText(),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Receive message from the webview.\n\t\twebviewPanel.webview.onDidReceiveMessage((e: any) => {\n\t\t\tswitch (e.type) {\n\t\t\t\tcase 'ready':\n\t\t\t\t\twebviewPanel.webview.postMessage({\n\t\t\t\t\t\ttype: 'update',\n\t\t\t\t\t\ttext: document.getText(),\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\tcase 'update':\n\t\t\t\t\tthis.updateTextDocument(document, e.text);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\t// Initial update is handled by the 'ready' message from the webview\n\t\t// webviewPanel.webview.postMessage({\n\t\t// \ttype: 'update',\n\t\t// \ttext: document.getText(),\n\t\t// });\n\n\t\twebviewPanel.onDidDispose(() => {\n\t\t\tchangeDocumentSubscription.dispose();\n\t\t});\n\t}\n\n\tprivate getHtmlForWebview(webview: vscode.Webview): string {\n\t\tconst scriptUri = webview.asWebviewUri(vscode.Uri.joinPath(this.context.extensionUri, 'dist', 'webview.js'));\n\n\t\treturn `\n\t\t\t<!DOCTYPE html>\n\t\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<meta charset=\"UTF-8\">\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src ${webview.cspSource} 'unsafe-inline';\">\n\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t\t\t\t<title>Tiptap Editor</title>\n\t\t\t\t<style>\n\t\t\t\t\tbody {\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-background);\n\t\t\t\t\t\tcolor: var(--vscode-editor-foreground);\n\t\t\t\t\t\tfont-family: var(--vscode-font-family);\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t\t#root {\n\t\t\t\t\t\theight: 100vh;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<div id=\"root\">Loading Tiptap Editor...</div>\n\t\t\t\t<script>\n\t\t\t\t\twindow.addEventListener('error', function (e) {\n\t\t\t\t\t\tconst root = document.getElementById('root');\n\t\t\t\t\t\tif (root) {\n\t\t\t\t\t\t\troot.innerHTML = '<div style=\"color: red; padding: 20px;\">' + \n\t\t\t\t\t\t\t\t'<h3>Runtime Error</h3>' +\n\t\t\t\t\t\t\t\t'<pre>' + e.message + '\\\\n' + e.filename + ':' + e.lineno + '</pre>' +\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t</script>\n\t\t\t\t<script src=\"${scriptUri}\"></script>\n\t\t\t</body>\n\t\t\t</html>`;\n\t}\n\n\tprivate updateTextDocument(document: vscode.TextDocument, text: string) {\n\t\tconst edit = new vscode.WorkspaceEdit();\n\n\t\t// Just replace the entire document. \n\t\t// In a real implementation, we would compute a diff to be more efficient and preserve cursor position if possible.\n\t\tedit.replace(\n\t\t\tdocument.uri,\n\t\t\tnew vscode.Range(0, 0, document.lineCount, 0),\n\t\t\ttext\n\t\t);\n\n\t\treturn vscode.workspace.applyEdit(edit);\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import * as vscode from 'vscode';\nimport { TiptapEditorProvider } from './TiptapEditorProvider';\n\nexport function activate(context: vscode.ExtensionContext) {\n\tcontext.subscriptions.push(TiptapEditorProvider.register(context));\n}\n"],"names":["module","exports","require","TiptapEditorProvider","register","context","provider","vscode","window","registerCustomEditorProvider","viewType","constructor","resolveCustomTextEditor","document","webviewPanel","_token","webview","options","enableScripts","localResourceRoots","Uri","joinPath","this","extensionUri","html","getHtmlForWebview","changeDocumentSubscription","workspace","onDidChangeTextDocument","e","uri","toString","postMessage","type","text","getText","onDidReceiveMessage","updateTextDocument","onDidDispose","dispose","scriptUri","asWebviewUri","cspSource","edit","WorkspaceEdit","replace","Range","lineCount","applyEdit","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","subscriptions","push"],"ignoreList":[],"sourceRoot":""}